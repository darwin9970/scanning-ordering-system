# æ¡Œå°æ‰«ç ç‚¹å•ç³»ç»Ÿ - å¼€å‘ä¸éƒ¨ç½²æŒ‡å—

## ä¸€ã€å¼€å‘ç¯å¢ƒæ­å»º

### 1.1 ç³»ç»Ÿè¦æ±‚

| è½¯ä»¶       | ç‰ˆæœ¬è¦æ±‚ | è¯´æ˜               |
| :--------- | :------- | :----------------- |
| Bun        | 1.x      | åŒ…ç®¡ç†å™¨å’Œè¿è¡Œæ—¶   |
| PostgreSQL | 16+      | ä¸»æ•°æ®åº“           |
| Redis      | 7.0+     | ç¼“å­˜å’Œæ¶ˆæ¯é˜Ÿåˆ—     |
| Docker     | 20.x+    | å®¹å™¨åŒ–éƒ¨ç½²ï¼ˆå¯é€‰ï¼‰ |
| Git        | 2.x      | ç‰ˆæœ¬æ§åˆ¶           |

### 1.2 æŠ€æœ¯æ ˆ

| å±‚çº§     | æŠ€æœ¯æ ˆ                                        | è¯´æ˜                          |
| :------- | :-------------------------------------------- | :---------------------------- |
| åå°ç®¡ç† | Next.js 16, TailwindCSS, React Query, Zustand | App Router, Server Components |
| API æœåŠ¡ | Elysia, Drizzle ORM                           | é«˜æ€§èƒ½ APIï¼Œç±»å‹å®‰å…¨ ORM      |
| æ¶ˆæ¯é˜Ÿåˆ— | Redis Stream                                  | æ‰“å°ä»»åŠ¡é˜Ÿåˆ—                  |
| å®æ—¶é€šä¿¡ | WebSocket                                     | è®¢å•å®æ—¶é€šçŸ¥                  |
| æ•°æ®åº“   | PostgreSQL 16                                 | ä¸»æ•°æ®åº“                      |
| ç¼“å­˜     | Redis 7                                       | ä¼šè¯ç®¡ç†ã€å…±äº«è´­ç‰©è½¦          |

### 1.3 å®‰è£… Bun

```bash
# Windows (PowerShell)
powershell -c "irm bun.sh/install.ps1 | iex"

# macOS / Linux
curl -fsSL https://bun.sh/install | bash
```

### 1.4 å®‰è£… PostgreSQL

ä¸‹è½½åœ°å€: https://www.postgresql.org/download/

åˆ›å»ºæ•°æ®åº“:

```sql
CREATE DATABASE qr_order;
```

### 1.5 å®‰è£… Redis

- Windows: https://github.com/tporadowski/redis/releases
- macOS: `brew install redis`
- Linux: `apt install redis-server`

## äºŒã€é¡¹ç›®å¯åŠ¨

### 2.1 å…‹éš†é¡¹ç›®

```bash
cd your-workspace
# é¡¹ç›®å·²åœ¨æœ¬åœ°åˆ›å»º
```

### 2.2 API æœåŠ¡å¯åŠ¨

```bash
cd api

# 1. å®‰è£…ä¾èµ–
bun install

# 2. å¤åˆ¶ç¯å¢ƒå˜é‡
cp .env.example .env

# 3. ç¼–è¾‘ .env æ–‡ä»¶
# DATABASE_URL="postgres://postgres:password@localhost:5432/qr_order"
# REDIS_URL="redis://localhost:6379"
# JWT_SECRET="your-secret-key"

# 4. åŒæ­¥æ•°æ®åº“ç»“æ„
bun run db:push

# 5. æ’­ç§æµ‹è¯•æ•°æ®
bun run db:seed

# 6. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
bun run dev

# 7. (å¯é€‰) å¯åŠ¨æ‰“å° Worker
bun run worker:dev
```

API æœåŠ¡è¿è¡Œåœ¨: http://localhost:4000
WebSocket: ws://localhost:4000/ws/store/:storeId

### 2.3 åå°ç®¡ç†ç³»ç»Ÿå¯åŠ¨

```bash
cd admin

# 1. å®‰è£…ä¾èµ–
bun install

# 2. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
bun run dev
```

åå°ç®¡ç†ç³»ç»Ÿè¿è¡Œåœ¨: http://localhost:3000

### 2.4 éªŒè¯å®‰è£…

1. è®¿é—® http://localhost:4000/swagger æŸ¥çœ‹ API æ–‡æ¡£
2. è®¿é—® http://localhost:3000/login è¿›å…¥ç™»å½•é¡µ
3. ä½¿ç”¨æµ‹è¯•è´¦å·ç™»å½•: admin / admin123

## ä¸‰ã€å¼€å‘æµç¨‹

### 3.1 ç›®å½•çº¦å®š

```
api/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ db/schema.ts      # Drizzle æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ routes/           # API è·¯ç”±
â”‚   â”œâ”€â”€ types/            # TypeScript ç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ ws/               # WebSocket æ¨¡å—
â”‚   â”œâ”€â”€ worker/           # Worker æœåŠ¡
â”‚   â””â”€â”€ services/         # ä¸šåŠ¡æœåŠ¡

admin/
â”œâ”€â”€ app/dashboard/        # é¡µé¢
â”œâ”€â”€ components/           # ç»„ä»¶
â”œâ”€â”€ lib/api.ts            # API å®¢æˆ·ç«¯
â”œâ”€â”€ types/                # ç±»å‹å®šä¹‰
â””â”€â”€ store/                # Zustand çŠ¶æ€
```

### 3.2 æ·»åŠ æ–°åŠŸèƒ½æµç¨‹

**åç«¯:**

1. ä¿®æ”¹ `src/db/schema.ts` æ·»åŠ æ•°æ®æ¨¡å‹
2. è¿è¡Œ `bun run db:push` åŒæ­¥æ•°æ®åº“
3. åœ¨ `src/routes/` åˆ›å»ºè·¯ç”±æ–‡ä»¶
4. åœ¨ `src/types/index.ts` æ·»åŠ ç±»å‹å®šä¹‰
5. åœ¨ `src/index.ts` æ³¨å†Œè·¯ç”±

**å‰ç«¯:**

1. åœ¨ `types/index.ts` æ·»åŠ å¯¹åº”ç±»å‹
2. åœ¨ `lib/api.ts` æ·»åŠ  API æ–¹æ³•
3. åœ¨ `app/dashboard/` åˆ›å»ºé¡µé¢
4. åœ¨ `components/layout/sidebar.tsx` æ·»åŠ èœå•

### 3.3 å¸¸ç”¨å‘½ä»¤

**API é¡¹ç›®:**

```bash
bun run dev          # å¯åŠ¨å¼€å‘æœåŠ¡å™¨
bun run start        # ç”Ÿäº§æ¨¡å¼å¯åŠ¨
bun run worker       # å¯åŠ¨æ‰“å° Worker
bun run db:push      # åŒæ­¥æ•°æ®åº“ç»“æ„
bun run db:generate  # ç”Ÿæˆè¿ç§»æ–‡ä»¶
bun run db:studio    # æ‰“å¼€ Drizzle Studio
bun run db:seed      # æ’­ç§æµ‹è¯•æ•°æ®
```

**Admin é¡¹ç›®:**

```bash
npm run dev          # å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run build        # æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run start        # å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨
npm run lint         # ESLint æ£€æŸ¥
npm run lint:fix     # ESLint è‡ªåŠ¨ä¿®å¤
npm run typecheck    # TypeScript ç±»å‹æ£€æŸ¥
npm run format       # Prettier æ ¼å¼åŒ–
```

## å››ã€ä»£ç è´¨é‡å·¥å…·

é¡¹ç›®é…ç½®äº†å®Œæ•´çš„ä»£ç è´¨é‡å·¥å…·é“¾ï¼Œç¡®ä¿ä»£ç è§„èŒƒä¸€è‡´ã€‚

### 4.1 å·¥å…·æ¦‚è§ˆ

| å·¥å…·         | ä½œç”¨             | é…ç½®æ–‡ä»¶            |
| :----------- | :--------------- | :------------------ |
| ESLint       | ä»£ç è§„èŒƒæ£€æŸ¥     | `eslint.config.mjs` |
| Prettier     | ä»£ç æ ¼å¼åŒ–       | `.prettierrc`       |
| Husky        | Git hooks ç®¡ç†   | `.husky/`           |
| lint-staged  | åªæ£€æŸ¥æš‚å­˜æ–‡ä»¶   | `package.json`      |
| EditorConfig | è·¨ç¼–è¾‘å™¨æ ¼å¼ç»Ÿä¸€ | `.editorconfig`     |

### 4.2 æäº¤å‰è‡ªåŠ¨æ£€æŸ¥

æ¯æ¬¡ `git commit` æ—¶ä¼šè‡ªåŠ¨è¿è¡Œä»¥ä¸‹æ£€æŸ¥ï¼š

```
git commit -m "feat: xxx"
  â”‚
  â”œâ”€â”€ ğŸ“¦ Admin é¡¹ç›®
  â”‚   â”œâ”€â”€ lint-staged (ESLint + Prettier)
  â”‚   â””â”€â”€ tsc --noEmit (TypeScript æ£€æŸ¥)
  â”‚
  â”œâ”€â”€ ğŸ“¦ API é¡¹ç›®
  â”‚   â”œâ”€â”€ lint-staged (ESLint + Prettier)
  â”‚   â””â”€â”€ tsc --noEmit (TypeScript æ£€æŸ¥)
  â”‚
  â””â”€â”€ âœ… é€šè¿‡åˆ™æäº¤æˆåŠŸ
```

å¦‚æœæ£€æŸ¥å¤±è´¥ï¼Œæäº¤ä¼šè¢«é˜»æ­¢ï¼Œéœ€è¦å…ˆä¿®å¤é”™è¯¯ã€‚

### 4.3 ç¼–è¾‘å™¨é…ç½® (VSCode)

é¡¹ç›®åŒ…å« `.vscode/settings.json`ï¼Œå®‰è£…æ¨èæ‰©å±•åæ”¯æŒï¼š

- **ä¿å­˜æ—¶è‡ªåŠ¨æ ¼å¼åŒ–**: Prettier æ ¼å¼åŒ–ä»£ç 
- **ä¿å­˜æ—¶è‡ªåŠ¨ä¿®å¤**: ESLint è‡ªåŠ¨ä¿®å¤å¯ä¿®å¤çš„é—®é¢˜
- **TypeScript æ™ºèƒ½æç¤º**: ä½¿ç”¨é¡¹ç›®å†…çš„ TypeScript ç‰ˆæœ¬

**æ¨èæ‰©å±•** (`.vscode/extensions.json`):

- Prettier - Code formatter
- ESLint
- Tailwind CSS IntelliSense
- GitLens

### 4.4 æ‰‹åŠ¨è¿è¡Œæ£€æŸ¥

```bash
# Admin é¡¹ç›®
cd admin
npm run lint           # æ£€æŸ¥ ESLint
npm run lint:fix       # è‡ªåŠ¨ä¿®å¤
npm run typecheck      # TypeScript æ£€æŸ¥
npm run format         # Prettier æ ¼å¼åŒ–

# API é¡¹ç›®
cd api
bun run lint           # æ£€æŸ¥ ESLint
bun run lint:fix       # è‡ªåŠ¨ä¿®å¤
bun run typecheck      # TypeScript æ£€æŸ¥
bun run format         # Prettier æ ¼å¼åŒ–
```

### 4.5 è·³è¿‡æ£€æŸ¥ï¼ˆä¸æ¨èï¼‰

å¦‚æœéœ€è¦ä¸´æ—¶è·³è¿‡ pre-commit æ£€æŸ¥ï¼š

```bash
git commit -m "fix: xxx" --no-verify
```

âš ï¸ è¯·ä»…åœ¨ç´§æ€¥æƒ…å†µä¸‹ä½¿ç”¨ï¼Œæ­£å¸¸å¼€å‘åº”ç¡®ä¿ä»£ç é€šè¿‡æ‰€æœ‰æ£€æŸ¥ã€‚

## äº”ã€Docker éƒ¨ç½²

### 5.1 å‰ç½®è¦æ±‚

- Docker 20.10+
- Docker Compose 2.0+
- è‡³å°‘ 2GB å¯ç”¨å†…å­˜
- è‡³å°‘ 10GB å¯ç”¨ç£ç›˜ç©ºé—´

### 5.2 å¿«é€Ÿéƒ¨ç½²

**æ–¹å¼ä¸€ï¼šä½¿ç”¨å¯åŠ¨è„šæœ¬ï¼ˆæ¨èï¼‰**

```bash
# Linux/macOS
chmod +x docker-start.sh
./docker-start.sh

# Windows PowerShell
.\docker-start.ps1
```

**æ–¹å¼äºŒï¼šæ‰‹åŠ¨éƒ¨ç½²**

```bash
# 1. å¤åˆ¶ç¯å¢ƒå˜é‡
cp .env.example .env

# 2. ç¼–è¾‘ .env è®¾ç½®å¯†ç ï¼ˆç”Ÿäº§ç¯å¢ƒè¯·ä¿®æ”¹ï¼‰
# POSTGRES_PASSWORD=your_password
# JWT_SECRET=your_jwt_secret
# NEXT_PUBLIC_API_URL=http://localhost:4000
# NEXT_PUBLIC_WS_URL=ws://localhost:4000

# 3. å¯åŠ¨æ‰€æœ‰æœåŠ¡
docker-compose up -d --build

# 4. ç­‰å¾…æœåŠ¡å¯åŠ¨ï¼ˆçº¦ 20 ç§’ï¼‰
sleep 20

# 5. åˆå§‹åŒ–æ•°æ®åº“ï¼ˆéœ€è¦è¾“å…¥ y ç¡®è®¤ï¼‰
docker-compose exec api bun run db:push

# 6. åˆå§‹åŒ–ç§å­æ•°æ®ï¼ˆå¯é€‰ï¼‰
docker-compose exec api bun run db:seed

# 7. åˆå§‹åŒ–é¡µé¢é…ç½®ï¼ˆå¯é€‰ï¼‰
docker-compose exec api bun run init:page-configs
```

### 5.3 æœåŠ¡è¯´æ˜

| æœåŠ¡     | ç«¯å£ | è¯´æ˜              | è¿è¡Œæ—¶ |
| :------- | :--- | :---------------- | :----- |
| postgres | 5432 | PostgreSQL æ•°æ®åº“ | -      |
| redis    | 6379 | Redis ç¼“å­˜        | -      |
| api      | 4000 | API æœåŠ¡          | Bun    |
| worker   | -    | æ‰“å°ä»»åŠ¡ Worker   | Bun    |
| admin    | 3000 | åå°ç®¡ç†ç³»ç»Ÿ      | Bun    |

### 5.4 å¸¸ç”¨å‘½ä»¤

```bash
# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker-compose ps

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f              # æ‰€æœ‰æœåŠ¡
docker-compose logs -f api          # API æœåŠ¡
docker-compose logs -f admin        # Admin æœåŠ¡

# é‡å¯æœåŠ¡
docker-compose restart api
docker-compose restart admin

# åœæ­¢æœåŠ¡
docker-compose down

# åœæ­¢å¹¶åˆ é™¤æ•°æ®å·ï¼ˆâš ï¸ ä¼šåˆ é™¤æ•°æ®åº“æ•°æ®ï¼‰
docker-compose down -v

# é‡æ–°æ„å»ºå¹¶å¯åŠ¨
docker-compose up -d --build

# è¿›å…¥å®¹å™¨
docker-compose exec api sh
docker-compose exec admin sh
```

### 5.5 æ•°æ®æŒä¹…åŒ–

æ•°æ®å­˜å‚¨åœ¨ Docker volumes ä¸­:

- `postgres_data`: æ•°æ®åº“æ–‡ä»¶
- `redis_data`: Redis æ•°æ®
- `api_uploads`: API ä¸Šä¼ æ–‡ä»¶

### 5.6 è®¿é—®åœ°å€

| æœåŠ¡         | åœ°å€                          |
| :----------- | :---------------------------- |
| åå°ç®¡ç†ç³»ç»Ÿ | http://localhost:3000        |
| API æœåŠ¡     | http://localhost:4000        |
| API æ–‡æ¡£     | http://localhost:4000/swagger |
| æ•°æ®åº“       | localhost:5432                |
| Redis        | localhost:6379                |

### 5.7 æ•…éšœæ’æŸ¥

**æœåŠ¡æ— æ³•å¯åŠ¨**

```bash
# æ£€æŸ¥ç«¯å£å ç”¨
netstat -tulpn | grep -E '3000|4000|5432|6379'

# æŸ¥çœ‹æœåŠ¡æ—¥å¿—
docker-compose logs api
docker-compose logs admin

# æ£€æŸ¥å®¹å™¨çŠ¶æ€
docker-compose ps
```

**æ•°æ®åº“è¿æ¥å¤±è´¥**

```bash
# æ£€æŸ¥æ•°æ®åº“å¥åº·çŠ¶æ€
docker-compose exec postgres pg_isready -U postgres

# æ£€æŸ¥ç¯å¢ƒå˜é‡
docker-compose exec api env | grep DATABASE_URL

# æµ‹è¯•æ•°æ®åº“è¿æ¥
docker-compose exec postgres psql -U postgres -d qr_order -c "SELECT COUNT(*) FROM stores;"
```

**API æ— æ³•è®¿é—®**

```bash
# æµ‹è¯• API å¥åº·æ£€æŸ¥
curl http://localhost:4000/health

# æ£€æŸ¥ CORS é…ç½®ï¼ˆAPI éœ€è¦å…è®¸å‰ç«¯åŸŸåï¼‰
# æŸ¥çœ‹ api/src/index.ts ä¸­çš„ CORS é…ç½®
```

**å‰ç«¯æ— æ³•è¿æ¥ API**

1. æ£€æŸ¥ `NEXT_PUBLIC_API_URL` é…ç½®æ˜¯å¦æ­£ç¡®
2. æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯ä¿¡æ¯
3. æ£€æŸ¥ Network æ ‡ç­¾é¡µçš„è¯·æ±‚è¯¦æƒ…
4. ç¡®è®¤ API æœåŠ¡æ­£å¸¸è¿è¡Œï¼š`curl http://localhost:4000/health`

### 5.8 ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

**ä½¿ç”¨ Nginx åå‘ä»£ç†**

```bash
# å¯ç”¨ Nginx æœåŠ¡
docker-compose --profile production up -d nginx
```

**é…ç½® SSL è¯ä¹¦**

1. å°† SSL è¯ä¹¦æ”¾ç½®åˆ° `nginx/ssl/` ç›®å½•
2. ä¿®æ”¹ `nginx/nginx.conf` å¯ç”¨ HTTPS é…ç½®
3. é‡å¯ Nginx æœåŠ¡

**æ•°æ®å¤‡ä»½**

```bash
# å¤‡ä»½æ•°æ®åº“
docker-compose exec postgres pg_dump -U postgres qr_order > backup.sql

# æ¢å¤æ•°æ®åº“
docker-compose exec -T postgres psql -U postgres qr_order < backup.sql

# å¤‡ä»½ Redis æ•°æ®
docker-compose exec redis redis-cli SAVE
docker cp qr-order-redis:/data/dump.rdb ./redis-backup.rdb
```

### 5.9 å®‰å…¨å»ºè®®

1. **ä¿®æ”¹é»˜è®¤å¯†ç **ï¼šç”Ÿäº§ç¯å¢ƒå¿…é¡»ä¿®æ”¹ `POSTGRES_PASSWORD` å’Œ `JWT_SECRET`
2. **ä½¿ç”¨ HTTPS**ï¼šç”Ÿäº§ç¯å¢ƒå¿…é¡»é…ç½® SSL è¯ä¹¦
3. **é™åˆ¶ç«¯å£æš´éœ²**ï¼šä»…æš´éœ²å¿…è¦çš„ç«¯å£
4. **å®šæœŸæ›´æ–°**ï¼šå®šæœŸæ›´æ–° Docker é•œåƒå’Œä¾èµ–
5. **æ•°æ®å¤‡ä»½**ï¼šå®šæœŸå¤‡ä»½æ•°æ®åº“å’Œé‡è¦æ–‡ä»¶

## å…­ã€ç¯å¢ƒå˜é‡è¯´æ˜

### 6.1 Docker Compose ç¯å¢ƒå˜é‡

| å˜é‡å            | å¿…å¡« | è¯´æ˜         | é»˜è®¤å€¼      |
| :---------------- | :--- | :----------- | :---------- |
| POSTGRES_USER     | å¦   | æ•°æ®åº“ç”¨æˆ·   | postgres    |
| POSTGRES_PASSWORD | æ˜¯   | æ•°æ®åº“å¯†ç    | postgres123 |
| POSTGRES_DB       | å¦   | æ•°æ®åº“å     | qr_order    |
| JWT_SECRET        | æ˜¯   | JWT ç­¾åå¯†é’¥ | -           |

### 6.2 API ç¯å¢ƒå˜é‡

| å˜é‡å       | å¿…å¡« | è¯´æ˜                  | ç¤ºä¾‹                                        |
| :----------- | :--- | :-------------------- | :------------------------------------------ |
| DATABASE_URL | æ˜¯   | PostgreSQL è¿æ¥å­—ç¬¦ä¸² | postgres://user:pwd@localhost:5432/qr_order |
| REDIS_URL    | å¦   | Redis è¿æ¥å­—ç¬¦ä¸²      | redis://localhost:6379                      |
| JWT_SECRET   | æ˜¯   | JWT ç­¾åå¯†é’¥          | your-super-secret-key                       |
| PORT         | å¦   | æœåŠ¡ç«¯å£              | 4000                                        |
| NODE_ENV     | å¦   | ç¯å¢ƒæ¨¡å¼              | development / production                    |

### 6.3 Admin ç¯å¢ƒå˜é‡

| å˜é‡å              | å¿…å¡« | è¯´æ˜           | ç¤ºä¾‹                  |
| :------------------ | :--- | :------------- | :-------------------- |
| NEXT_PUBLIC_API_URL | å¦   | API åœ°å€       | http://localhost:4000 |
| NEXT_PUBLIC_WS_URL  | å¦   | WebSocket åœ°å€ | ws://localhost:4000   |

## ä¸ƒã€ç›‘æ§ä¸è¿ç»´

### 7.1 å¥åº·æ£€æŸ¥

```bash
# API å¥åº·æ£€æŸ¥
curl http://localhost:4000/health

# å“åº”
{
  "status": "ok",
  "timestamp": "2024-01-01T00:00:00.000Z"
}
```

### 7.2 æ—¥å¿—æŸ¥çœ‹

```bash
# Docker æ—¥å¿—
docker-compose logs -f api
docker-compose logs -f admin

# å¼€å‘ç¯å¢ƒ
# æ§åˆ¶å°ç›´æ¥è¾“å‡º
```

### 7.3 æ•°æ®åº“å¤‡ä»½

```bash
# å¯¼å‡ºæ•°æ®åº“ (Docker)
docker-compose exec postgres pg_dump -U postgres qr_order > backup.sql

# å¯¼å…¥æ•°æ®åº“
docker-compose exec -T postgres psql -U postgres qr_order < backup.sql
```

## å…­ã€å¸¸è§é—®é¢˜

### Q1: æ•°æ®åº“è¿æ¥å¤±è´¥

æ£€æŸ¥:

- PostgreSQL æœåŠ¡æ˜¯å¦å¯åŠ¨
- DATABASE_URL æ ¼å¼æ˜¯å¦æ­£ç¡®
- æ•°æ®åº“ç”¨æˆ·æƒé™

### Q2: Redis è¿æ¥å¤±è´¥

æ£€æŸ¥:

- Redis æœåŠ¡æ˜¯å¦å¯åŠ¨ (å¯é€‰ï¼Œä¸å½±å“æ ¸å¿ƒåŠŸèƒ½)
- REDIS_URL æ ¼å¼æ˜¯å¦æ­£ç¡®
- é˜²ç«å¢™ç«¯å£

### Q3: ç™»å½•åè·³è½¬å¼‚å¸¸

æ£€æŸ¥:

- JWT_SECRET æ˜¯å¦é…ç½®
- Token æ˜¯å¦æ­£ç¡®å­˜å‚¨
- æµè§ˆå™¨ localStorage

### Q4: API è·¨åŸŸé—®é¢˜

æ£€æŸ¥ API çš„ CORS é…ç½®:

```typescript
cors({
  origin: ["http://localhost:3000", "http://127.0.0.1:3000"],
  credentials: true,
});
```

### Q5: Docker éƒ¨ç½²åæ¥å£ä¸é€š

1. æ£€æŸ¥æœåŠ¡æ˜¯å¦æ­£å¸¸å¯åŠ¨ï¼š`docker-compose ps`
2. æ£€æŸ¥æœåŠ¡æ—¥å¿—ï¼š`docker-compose logs api`
3. æµ‹è¯• API å¥åº·æ£€æŸ¥ï¼š`curl http://localhost:4000/health`
4. æ£€æŸ¥ç¯å¢ƒå˜é‡é…ç½®æ˜¯å¦æ­£ç¡®
5. ç¡®è®¤æ•°æ®åº“å·²åˆå§‹åŒ–ï¼š`docker-compose exec api bun run db:push`
