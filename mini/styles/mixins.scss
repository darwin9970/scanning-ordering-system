/**
 * SCSS Mixins
 * 统一常用样式模式
 */

// 文本截断（单行）
@mixin text-ellipsis {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

// 文本截断（多行）
@mixin text-ellipsis-multi($lines: 2) {
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: $lines;
  overflow: hidden;
  text-overflow: ellipsis;
}

// 卡片样式
@mixin card {
  background: $bg-card;
  border-radius: $radius-lg;
  box-shadow: $shadow-sm;
  padding: $card-padding;
  margin-bottom: $card-margin-bottom;
}

// 按钮基础样式
@mixin button-base {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border: none;
  font-weight: $font-weight-medium;
  transition: all $duration-fast $ease-out;
  box-sizing: border-box;
  position: relative;
  overflow: hidden;
  cursor: pointer;
  
  &::after {
    display: none;
  }
}

// 输入框基础样式
@mixin input-base {
  height: $input-height;
  padding: 0 $input-padding;
  background: $bg-card;
  border: 1rpx solid $border-dark;
  border-radius: $radius-base;
  font-size: $font-size-base;
  color: $text-primary;
  line-height: $line-height-normal;
  box-sizing: border-box;
  
  &:focus {
    border-color: $primary;
    outline: none;
  }
  
  &::placeholder {
    color: $text-tertiary;
  }
}

// 标题样式
@mixin title($size: 'md') {
  font-weight: $font-weight-semibold;
  color: $text-primary;
  line-height: $line-height-tight;
  
  @if $size == 'xs' {
    font-size: $font-size-xs;
  } @else if $size == 'sm' {
    font-size: $font-size-sm;
  } @else if $size == 'md' {
    font-size: $font-size-md;
  } @else if $size == 'lg' {
    font-size: $font-size-lg;
  } @else if $size == 'xl' {
    font-size: $font-size-xl;
  }
}

// 正文样式
@mixin text($size: 'base') {
  color: $text-secondary;
  line-height: $line-height-normal;
  
  @if $size == 'xs' {
    font-size: $font-size-xs;
  } @else if $size == 'sm' {
    font-size: $font-size-sm;
  } @else if $size == 'base' {
    font-size: $font-size-base;
  } @else if $size == 'md' {
    font-size: $font-size-md;
  }
}

// 辅助文字样式
@mixin text-helper {
  font-size: $font-size-sm;
  color: $text-tertiary;
  line-height: $line-height-normal;
}

// 价格样式
@mixin price($size: 'medium') {
  color: $primary;
  font-weight: $font-weight-semibold;
  line-height: 1;
  
  @if $size == 'small' {
    font-size: $font-size-md;
  } @else if $size == 'medium' {
    font-size: $font-size-xl;
  } @else if $size == 'large' {
    font-size: $font-size-xxxl;
  }
}

// 分割线
@mixin divider {
  height: 1rpx;
  background: $border-lighter;
  margin: $spacing-lg 0;
}

// 悬浮效果
@mixin hover {
  transition: all $duration-fast $ease-out;
  
  &:active {
    opacity: 0.8;
    transform: scale(0.98);
  }
}

// 禁用状态
@mixin disabled {
  opacity: 0.5;
  cursor: not-allowed;
  pointer-events: none;
}

// 加载状态
@mixin loading {
  position: relative;
  pointer-events: none;
  
  &::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(255, 255, 255, 0.8);
    z-index: 1;
  }
}

// Flex 居中
@mixin flex-center {
  display: flex;
  align-items: center;
  justify-content: center;
}

// Flex 列
@mixin flex-column {
  display: flex;
  flex-direction: column;
}

// 绝对居中
@mixin absolute-center {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
}

// 安全区域适配（底部）
@mixin safe-area-bottom {
  padding-bottom: constant(safe-area-inset-bottom);
  padding-bottom: env(safe-area-inset-bottom);
}

// 安全区域适配（顶部）
@mixin safe-area-top {
  padding-top: constant(safe-area-inset-top);
  padding-top: env(safe-area-inset-top);
}
