#!/usr/bin/env sh

echo "ğŸ” Running pre-commit checks..."

# Admin é¡¹ç›®æ£€æŸ¥
echo ""
echo "ğŸ“¦ Checking admin..."
cd admin

# è¿è¡Œ lint-staged
npx lint-staged
if [ $? -ne 0 ]; then
  echo "âŒ Admin lint-staged failed."
  exit 1
fi

# è¿è¡Œ TypeScript ç±»å‹æ£€æŸ¥
echo "Running TypeScript type check for admin..."
npm run typecheck
if [ $? -ne 0 ]; then
  echo "âŒ Admin TypeScript check failed."
  exit 1
fi

# API é¡¹ç›®æ£€æŸ¥
echo ""
echo "ğŸ“¦ Checking api..."
cd ../api

# è¿è¡Œ lint-staged
npx lint-staged
if [ $? -ne 0 ]; then
  echo "âŒ API lint-staged failed."
  exit 1
fi

# è¿è¡Œ TypeScript ç±»å‹æ£€æŸ¥
echo "Running TypeScript type check for api..."
npm run typecheck
if [ $? -ne 0 ]; then
  echo "âŒ API TypeScript check failed."
  exit 1
fi

# Mini é¡¹ç›®æ£€æŸ¥
echo ""
echo "ğŸ“¦ Checking mini..."
cd ../mini

# è¿è¡Œ lint-staged
npx lint-staged
if [ $? -ne 0 ]; then
  echo "âŒ Mini lint-staged failed."
  exit 1
fi

echo ""
echo "âœ… All checks passed!"
